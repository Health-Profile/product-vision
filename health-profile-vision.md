# Видение приложения с рабочим названием «Health Profile»

## Краткое описание и назначение приложения
**Health Profile** (далее **HP**) - это PWA, представляющее собой единое пространство для пользователя по контролю различных аспектов своего здоровья, а также здоровья других пользователей.

**HP** представляет собой оболочку для различных подсистем (модулей). К таким подсистемам относится подсистема с рабочим названием **Nutrition**. Именно эта подсистема войдёт в состав MVP приложения **HP**.
Другие возможные подсистемы:
*  **Sleep (Сон)** - включает в себя трекер сна и аналитику сна.
*  **Body State (Состояние Организма)** - подсистема, которая хранит и генерирует статистику на основе введённых в неё данных исследований, которые прошёл пользователь (например уровень сахара за год). Вероятен функционал анализа состояния организма на основании введённых данных исследований и выдачи на основе этого анализа советов/предупреждений для пользователя (ни в коем случае не диагнозов).
*  **To See A Doctor (На Приём)** - подсистема для записи на приём к врачу (вероятно с возможностью записи через страховые компании по ДМС).

Подразумевается, что все подсистемы должны быть автономными, модульно подключаясь к приложению оболочке HP.

Более вероятный сценарий, **HP** - будет являться не приложением-оболочкой, а экосистемой. На данном этапе это не столь важно, т.к. подсистемы, входящие в **HP** будут независимыми.
## Решаемые задачи и поддерживаемые сценарии
* Доступность для пользователей с ограниченными возможностями
* Удобная система входа/регистрации
* Предоставление встроенной справочной системы
* Удобная навигация

## Функциональная архитектура
Функциональная архитектура клиентской части приложения делится на 2 уровня:
* **Уровень компонентов**. К этому уровню относится библиотека компонентов (UI-kit), а так же иные визуальные стандартизованные области приложения, обеспечивающие типовые взаимодействия в интерфейсе (например, компонент уведомлений).
* **Уровень сервисов**. Программные модули, работающие в составе **HP**, обеспечивающие выполнение нефункциональных требований - отзывчивости интерфейса, безопасности, устойчивости и т.д.

Так же выделяются серверные компоненты **HP**, представляющие функционал, необходимый для функционирования клиентского приложения.

<p align="center">
  <img src="./assets/a.jpg"/>
</p>

В состав клиентской части **HP** входят:
* Библиотека компонентов
* Управление кэшированием
* Система уведомлений
* Навигационная система
* Поддержка локализации
* Справочная система
* Управление безопасностью
* Управление журналированием и обработкой ошибок
* Поддержка доступности
* Система аналитики
* Система конфигурации
* Управление доставкой HTTP-запросов

Серверная часть **HP** состоит из:
* Модуля аутентификации/авторизации
* Модуля журналирования
* Модуля уведомлений
* Модуля аналитики
* Модуля конфигурации
* Модуля справочной системы

##  Различные аспекты архитектуры **HP**
### Общие особенности архитектуры **HP**
* **Модульность и расширяемость.** Наиболее вероятны два сценария объединения подсистем в экосистему **HP**: использование архитектуры микрофронтэндов и использование архитектуры, где каждая подсистема - отдельное SPA. Оба этих сценарий предполагают, что на стадии разработки а возможно и в production, каждая подсистема является технологически независимым
* **Использование Single Sign-On** при необходимости для всех подсистем в составе **HP**. [Подробнее о технологии](https://habr.com/ru/company/nixys/blog/563244/)
* **Совместимость с автотестированием**. Возможность создавать как модульные тесты для отдельных фрагментов, так и интеграционные тесты для проверки сложных сценариев.
* **Отказоустойчивость.** Возникновение ошибки на сервере или в клиенте не приводит к остановке последнего или другим необратимым последствиям. Все проблемы безопасно перехватываются, пользователь информируется о возникновении проблемы, ему предлагаются возможные варианты реакции, проблема фиксируется централизованно в журнале на стороне сервера.
* **Кеширование данных.** Активное использование кешированных данных позволяет ускорить работу, продолжать действия даже в условиях временного отсутствия стабильного подключения к сети. Но должна быть также возможность быстро обновить любые данные.
* **Расширяемость перечня механизмов коммуникации**. **HP**/подсистемы могут взаимодействовать с серверной стороной с применением подходов REST и GraphQL.
* **Наличие постоянных каналов связи**. **HP** поддерживает постоянное взаимодействие с сервером (WebSocket).
* **Легкость.** Сложная вычислительная логика и обработка больших объемов данных не должны входить в состав **HP** и подсистем, эти аспекты должны быть отнесены к сфере серверного функционирования.

### Поддержка стандартов и технологий
* **Кроссбраузерность.** Поддержка последней версии Chrome/Chromium, Firefox, Edge, Safari
* **Адаптивность интерфейсов** Поддержка различных разрешений экранов. Поддержка браузеров мобильных платформ (Android, iOS).
* **Кроссплатформенность.** Должна быть возможность сборки приложения из единой кодовой базы как под Web, так и под мобильные и десктопные платформы.
* **Использование СПО, открытых стандартов и протоколов.** Для платформы, библиотек, инструментов. Будет использована платформа Node как текущий стандарт-де-факто для разработки фронтенд-приложений. Все лицензии используемого ПО позволяют использование в коммерческих решениях.
* **Использование открытых Web-стандартов.** **HP** строится на базе Web-стандартов (спецификаций HTML, CSS, JS).
  
## Основные средства и процесс разработки
* Единая структура фронтенд-проектов
* Средства для генерации кода
* Единый code-style для разработки кода 
* Автоматизированный DevOps
* Библиотека компонентов UI Kit. Таблицы, Постраничный просмотр, Поле поиска и другие элементы, которые часто встречаются в интерфейсах

## Безопасность
* Обеспечение гибкого разделения полномочий на основе ролевой матрицы
* Поддержка аутентификации посредством OAuth 2.0
* При необходимости поддержка SSO
* Поддержка JWT
* Совместимость с двухфакторной аутентификацией

## Важнейшие аспекты эргономики и UX
* **Доступность интерфейсов (accessibility).** Возможность увеличивать шрифт. Делать цветовую схему контрастнее при необходимости.
* **Унификация.** Унификация UX-паттернов и визуального стиля посредством использования дизайн-системы.
* **Локализация.** Возможность локализации интерфейса без переделывания его кода. Как минимум для стран СНГ. Возможность последовательного добавления переводов.
* **Отзывчивость.** Отзывчивость будет измеряться в процессе автотестирования.
* **Превентивное устранение ошибок.** Мгновенная валидация полей форм, автоматическое форматирование значений (например, номеров телефонов), контекстные быстрые подсказки.
* **Единый механизм уведомлений о событиях**. Гибкая настройка уведомлений, возможность быстрой реакции на уведомления.
* **Прозрачность состояния системы для пользователя**. Понятное отображение ошибок, индикация взаимодействия с сервером, индикатор состояния фоновых процессов.
* **Быстрая отправка обратной связи непосредственно из **HP**.** Отправка запроса о разработке новой функциональной возможности. Отправка сообщения об ошибке. Отправка отзыва, оценки удобства работы в приложении.